<p>nested-tree1 works!</p>

<mat-tree
  #tree
  [dataSource]="dataSource"
  [childrenAccessor]="childrenAccessor"
  class="entire-tree"
>
  <!----------------
  --- leaf nodes ---
  ----------------->

  <!-- _note: Use <mat-nested-tree-node> for nodes of a nesteed tree  -->
  <mat-nested-tree-node *matTreeNodeDef="let node">
    <div class="single-node-item--outer">
      <!-- _note: class="mat-tree-node" still can be used for styling -->
      <div class="mat-tree-node" (click)="onClick(node)">
        <mat-icon>memory</mat-icon>
        <div class="single-node-item--inner">
          {{node.name}}
        </div>
      </div>
    </div>
  </mat-nested-tree-node>
      
  <!----------------------
  --- expandable nodes ---
  ----------------------->

  <!-- _note:
    It seems that if there's multiple <mat-nested-tree-node> with "when",
    only the first matched will be used
  -->
  <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">

    <!-- display the expandable node (not include its children)  -->
    <div class="single-node-expandable">
      <!-- _note:
        Use matTreeNodeToggle to make the node expandable/collapsible
        To make the entire node expandable, change to: <div class="mat-tree-node" matTreeNodeToggle>
      -->
      <div class="mat-tree-node" (click)="onClick(node)">
        <button
          matIconButton
          matTreeNodeToggle
          [attr.aria-label]="'Toggle ' + node.name">
          <mat-icon class="mat-icon-rtl-mirror">
            {{tree.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
          </mat-icon>
        </button>
        {{node.name}}
      </div>
    </div>

    <!-- hide/display child nodes -->
    <div [class.hide-child-nodes]="!tree.isExpanded(node)">
      <!-- _note: Change indention in class 'all-child-nodes' -->
      <div class="all-child-nodes">
        <ng-container matTreeNodeOutlet></ng-container>
      </div>
    </div>
  </mat-nested-tree-node>
</mat-tree>
